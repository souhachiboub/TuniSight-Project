{% extends 'squeletteboutique.html.twig' %}


{% block body %}
<div class="container mt-4">
    <div class="card shadow-lg">
        <div class="card-header bg-primary text-white text-center">
            <h3 class="mb-0">{{ form.vars.value.id ? 'Modifier' : 'Ajouter' }} une catégorie</h3>
        </div>

        <div class="card-body">
            {{ form_start(form, {'attr': {'novalidate': 'novalidate', 'class': 'needs-validation'}}) }}
                
                <div class="mb-3">
                    {{ form_label(form.nom, 'Nom de la catégorie', {'label_attr': {'class': 'form-label'}}) }}
                    {{ form_widget(form.nom, {'attr': {'class': 'form-control', 'placeholder': 'Entrez le nom'}}) }}
                    {{ form_errors(form.nom) }}
                </div>

                <div class="mb-3">
                    {{ form_label(form.description, 'Description', {'label_attr': {'class': 'form-label'}}) }}
                    {{ form_widget(form.description, {'attr': {'class': 'form-control', 'placeholder': 'Entrez une description'}}) }}
                    {{ form_errors(form.description) }}
                </div>

                <div class="text-center">
                    {{ form_widget(form.save, {'attr': {'class': 'btn btn-success w-50'}}) }}
                </div>

            {{ form_end(form) }}
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>
    document.addEventListener("DOMContentLoaded", function() {
        {% for message in app.flashes('success') %}
            Swal.fire({
                icon: 'success',
                title: 'Modification réussie !',
                text: '{{ message|e('js') }}',
                timer: 2000, // Auto-fermeture après 2 sec
                showConfirmButton: false
            }).then(() => {
                window.location.href = "{{ path('app_categorie_produit') }}";
            });
        {% endfor %}
    });
</script>

<!-- Inclusion de Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
{% endblock %}
