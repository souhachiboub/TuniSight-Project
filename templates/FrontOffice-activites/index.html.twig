{% extends 'base.html.twig' %}

{% block listActivites %}

	<style>
		.filter-btn {
			padding: 5px 15px;
			font-size: 14px;
			border: 1px solid #53d2dc;
		}
		.filter-btn.active {
			background-color: #53d2dc;
		}

		.city-card {
			position: relative;
			height: 150px;
			background-size: cover;
			background-position: center;
			border-radius: 15px;
			display: flex;
			align-items: center;
			justify-content: center;
			color: white;
			font-size: 22px;
			font-weight: bold;
			text-shadow: 2px 2px 5px rgba(0, 0, 0, 0.7);
			overflow: hidden;
			box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
			transition: transform 0.3s ease-in-out;
		}

		.city-card:hover {
			transform: scale(1.05);
		}

		.overlay {
			position: absolute;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			background: rgba(0, 0, 0, 0.4);
			border-radius: 15px;
		}

		.city-card h4 {
			position: relative;
			z-index: 2;
			margin: 0;
			font-size: 24px;
			color: white
		}
		#numPages {
			appearance: none;
			background-color: transparent;
			border: 0.125em solid #53d2dc;
			border-radius: 0.9375em;
			box-sizing: border-box;
			color: #3B3B3B;
			cursor: pointer;
			display: inline-block;
			font-family: Roobert, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
			font-size: 14px;
			font-weight: 600;
			line-height: 1.2;
			margin: 0;
		}
		.filter-btn.active {
			background-color: #53d2dc !important;

		}
		/* css les dates des activités */
		.activity-dates {
			display: flex;
			align-items: center;
			margin-top: 10px;
			font-size: 16px;
		}
		.activity-dates .fa {
			margin-right: 5px;
			color: #26648e;
		}
	</style>
	<section class="ftco-section">
		<div class="container">
			<div class="row justify-content-center pb-4">
				<div class="col-md-12 heading-section text-center ftco-animate">
					<span class="subheading">Activités</span>
					<h2 class="mb-4">Nos Activités</h2>
				</div>
			</div>

			<!-- Boutons de filtre par catégorie -->
			<div class="text-center mb-4">
				<button class="filter-btn" data-category="all">Toutes</button>
				{% for categorie in categories %}
					<button class="filter-btn" data-category="{{ categorie.id }}">{{ categorie.nom }}</button>
				{% endfor %}
			</div>

			<div class="row" id="pagination">
				{% for activite in pagination %}
					<div class="col-md-4 ftco-animate activite-card" data-category="{{ activite.categorie.id }}">
						<div class="project-wrap">
							<a href="#" class="img" style="background-image: url('{{ asset('uploads/images/' ~ activite.image) }}');">
								<span class="price">TN &nbsp;{{ activite.prix }}/personne</span>
							</a>
							<div class="text p-4">
								<span class="days">{{ activite.duree }}
									jours</span>
								<h3>
									<a href="#">{{ activite.libelle }}</a>
								</h3>
								<div class="activity-dates">
									<span style=" font-size:16px">
										<i class="fa fa-calendar"></i>
										{{ activite.date_debut|date('d/m/Y') }}</span>
									&nbsp;&nbsp;
									<span style="font-size:16px">
										<i class="fa fa-calendar-check"></i>
										{{ activite.date_fin|date('d/m/Y') }}</span>
								</div>
								<p class="location">
									<span class="fa fa-map-marker"></span>
									{{ activite.localisation }}</p>

								<div style="display:flex">
									<a href="{{ path('app_activite_show', {'id': activite.id}) }}">
										<button>Voir détails</button>
									</a>
									&nbsp;
									<button id="btn-reserver">Réserver</button>
								</div>
							</div>
						</div>
					</div>
				{% endfor %}
			</div>

			<!-- Pagination -->
			<div id="pagination-container" class="text-center mt-4">
				{% if pagination.pageCount > 1 %}
					{% for page in 1..pagination.pageCount %}
						<a id="numPages" href="{{ path('app_index', {'page': page, 'categorie': app.request.query.get('categorie')}) }}#pagination" class="filter-btn {% if page == pagination.currentPageNumber %}active{% endif %}">
							{{ page }}
						</a>
					{% endfor %}
				{% else %}
					<button class="filter-btn">1</button>
				{% endif %}
			</div>
			<!-- Section villes -->
			<section class="ftco-section">
				<div class="container">
					<div class="row justify-content-center pb-4">
						<div class="col-md-12 heading-section text-center ftco-animate">
							<span class="subheading">Villes</span>
							<h2 class="mb-4">Nos destinations favorites</h2>
						</div>
					</div>

					<div class="row">
						{% if villes is defined %}

							{% for ville in villes %}
								<div class="col-md-3">
									<div class="city-card" style="background-image: url('{{ asset('uploads/villes/' ~ ville.image) }}');">
										<div class="overlay"></div>
										<h4>{{ ville.nom }}</h4>
									</div>
									<br>
								</div>
							{% endfor %}
						{% else %}
							<p>Aucune ville n'a été définie.</p>
						{% endif %}
					</div>

				</div>
			</section>

		{% endblock %}
		{% block javascript %}
			<script>
				document.addEventListener("DOMContentLoaded", function () {
const filterButtons = document.querySelectorAll(".filter-btn");

filterButtons.forEach(button => {
button.addEventListener("click", function () {
const category = this.getAttribute("data-category");
const url = new URL(window.location.href);
if (category === "all") {
url.searchParams.delete('categorie');
} else {
url.searchParams.set('categorie', category);
}
window.location.href = url.toString();
});
});
});
			</script>
		{% endblock %}
