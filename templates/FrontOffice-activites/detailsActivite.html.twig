<!DOCTYPE html>
<html lang="en">
	<head>
		<title>TunisSight - Details</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
		{% block css %}
			<link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700,800,900" rel="stylesheet">
			<link href="https://fonts.googleapis.com/css2?family=Arizonia&display=swap" rel="stylesheet">

			<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
			<link rel="stylesheet" href="{{asset('client/css/animate.css')}}">
			<link rel="stylesheet" href="{{asset('client/css/owl.carousel.min.css')}}">
			<link rel="stylesheet" href="{{asset('client/css/owl.theme.default.min.css')}}">
			<link rel="stylesheet" href="{{asset('client/css/magnific-popup.css')}}">
			<link rel="stylesheet" href="{{asset('client/css/bootstrap-datepicker.css')}}">
			<link rel="stylesheet" href="{{asset('client/css/flaticon.css')}}">
			<link rel="stylesheet" href="{{asset('client/css/style.css')}}">
		{% endblock %}
		<style>
			/* Global settings */
			body,
			html {
				margin: 0;
				padding: 0;
				height: 100%;
				font-family: Poppins, sans-serif;
				background-color: #f9f9f9;

			}

			.hero-wrap {
				position: relative;
				background-image: url('{{ asset('client/images/background33.jpg') }}');
				height: 45vh;
				background-size: cover;
				background-position: center;
			}

			.hero-wrap .overlay {
				position: absolute;
				top: 0;
				left: 0;
				right: 0;
				bottom: 0;
				background: rgba(0, 0, 0, 0.5);
			}

			/* Container settings */
			.container {
				max-width: 1200px;
				margin: 0 auto;
			}

			/* Details page styling */
			.details-container {
				display: flex;
				justify-content: space-between;
				align-items: flex-start;
				padding: 40px;
				background-color: #fff;
				border-radius: 10px;
				box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
				margin: 30px auto;
			}

			.details-image {
				width: 45%;
				height: 400px;
				background-size: cover;
				background-position: center;
				border-radius: 15px;
				box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
				transition: transform 0.3s ease-in-out;
			}

			.details-image:hover {
				transform: scale(1.05);
			}

			.details-text {
				width: 50%;
			}

			.details-text h3 {
				font-size: 32px;
				font-weight: bold;
				color: #333;
				margin-bottom: 15px;
				line-height: 1.3;
			}

			.details-text p {
				font-size: 16px;
				color: #777;
				line-height: 1.6;
				margin: 15px 0;
			}

			.price {
				color: #53d2dc;
				font-size: 28px;
				font-weight: bold;
				margin-bottom: 15px;
			}

			.location {
				font-size: 16px;
				color: #555;
				margin-top: 10px;
				display: flex;
				align-items: center;
			}

			.location .fa {
				color: #53d2dc;
				margin-right: 8px;
			}

			.btn-reserver {
				padding: 12px 40px;
				background-color: #53d2dc;
				color: #fff;
				border: none;
				border-radius: 25px;
				font-size: 18px;
				cursor: pointer;
				transition: background-color 0.3s ease, transform 0.3s ease;
			}

			.btn-reserver:hover {
				background-color: #1a1a1a;
				transform: translateY(-3px);
			}

			.details-container .container {
				display: flex;
				justify-content: space-between;
			}
			#btn-back {
				background-color: black;
			}
			button {
				appearance: none;
				background-color: transparent;
				border: 0.125em solid rgb(197, 189, 189);
				border-radius: 0.9375em;
				box-sizing: border-box;
				color: #3B3B3B;
				cursor: pointer;
				display: inline-block;
				font-family: Roobert, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
				font-size: 14px;
				font-weight: 600;
				line-height: 1.2;
				margin: 0;
				min-height: 2.5em;
				min-width: 0;
				outline: none;
				padding: 0.5em 1.5em;
				text-align: center;
				text-decoration: none;
				transition: all 300ms cubic-bezier(0.23, 1, 0.32, 1);
				user-select: none;
				-webkit-user-select: none;
				touch-action: manipulation;
				will-change: transform;
			}
			button:disabled {
				pointer-events: none;
			}

			button:hover {
				color: #fff;
				background-color: #1A1A1A;
				box-shadow: rgba(0, 0, 0, 0.25) 0 8px 15px;
				transform: translateY(-2px);
			}

			button:active {
				box-shadow: none;
				transform: translateY(0);
			}
			#btn-reserver:hover {
				background-color: #53d2dc;
			}
			.overlay {
				margin-top: 250px !important;
				text-align: center;
				background: rgba(0, 0, 0, 0.5);
				z-index: 1;
			}
			h1 {
				color: black !important;
				text-align: center !important
			}

			/* css sur le bouton r√©server wa9teli dispo=0*/
			button:disabled {
				opacity: 0.5;
				cursor: not-allowed;
			}

			button:disabled:hover,
			button:disabled:focus,
			button:disabled:active {
				background-color: inherit;
				color: inherit;
			}
		</style>
	</head>
	<body>
		<nav class="navbar navbar-expand-lg navbar-dark ftco_navbar bg-dark ftco-navbar-light" id="ftco-navbar">
			<div class="container">
				<img class="img" src="{{asset('admin/img/logo.png')}}"/>
				<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#ftco-nav" aria-controls="ftco-nav" aria-expanded="false" aria-label="Toggle navigation">
					<span class="oi oi-menu"></span>
					Menu
				</button>

				<div class="collapse navbar-collapse" id="ftco-nav">
					<ul class="navbar-nav ml-auto">
						<li class="nav-item active">
							<a href="index.html" class="nav-link">Accueil</a>
						</li>
						<li class="nav-item">
							<a href="about.html" class="nav-link">Boutique</a>
						</li>
						<li class="nav-item">
							<a href="destination.html" class="nav-link">Destination</a>
						</li>

						

					</li>
					<li class="nav-item dropdown">
    <a class="nav-link dropdown-toggle" href="#" id="loginDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
        <i style="font-size:30px" class="fa fa-user-circle"></i>
    </a>
    <div class="dropdown-menu dropdown-menu-right shadow-lg p-2 rounded" aria-labelledby="loginDropdown">

        {% if userId is not null %}
            <a class="dropdown-item d-flex align-items-center" href="{{ path('moncompte', {'id': userId}) }}">
                <i class="fa fa-user text-primary"></i>
                <span class="ml-2">üë§ {{ nom }} {{ prenom }}</span>
            </a>
            <a class="dropdown-item" href="{{ path('app_logout_front') }}">
                <i class="fa fa-sign-out-alt text-danger"></i>
                <span class="ml-2">Logout</span>
            </a>
        {% else %}
            <a class="dropdown-item d-flex align-items-center" href="{{ path('app_login_front') }}">
                <i class="fa fa-sign-in-alt text-primary"></i>
                <span class="ml-2">Login</span>
            </a>
            <a class="dropdown-item d-flex align-items-center font-weight-bold text-success" href="{{ path('app_inscription_front') }}">
                <i class="fa fa-user-plus"></i>
                <span class="ml-2">Cr√©er un compte</span>
            </a>
        {% endif %}

    		</div>
		</li>

				</ul>
			</div>
		</div>
		</body>
		</html></nav>

		<div class="hero-wrap">
			<div class="overlay"></div>
		</div>
		<h1 class=" mb-0 bread">D√©tails de l'activit√©
		</h1>

		<section class="ftco-section details-container">

			<div class="container">

				<div class="details-image" style="background-image: url('{{ asset('uploads/images/' ~ activite.image) }}');"></div>

				<div class="details-text">
					<span class="price">&nbsp;{{ activite.prix }}
						TN/personne
					</span>
					<h3>{{ activite.libelle }}</h3>
					<p>{{ activite.description }}</p>
					<p class="location">
						<span class="fa fa-map-marker"></span>
						{{ activite.localisation }}</p>
					<a href="{{ path('app_index')}}" class="btn-reserver" id="btn-back">Revenir</a>
					<button class="btn-reserver" {% if activite.disponibilite == 0 %} disabled {% endif %}>
							R√©server
					</button>
					

					 <button type="button" class="btn-reserver" data-bs-toggle="modal" data-bs-target="#voucherModal">
        Apply voucher
    </button>

    <!-- Modal -->
    <div class="modal fade" id="voucherModal" tabindex="-1" aria-labelledby="voucherModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="voucherModalLabel">Appliquer un Coupon</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body" id="voucherFormContainer">
                    <!-- Le formulaire sera charg√© ici via AJAX -->
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript pour charger le formulaire et g√©rer la soumission -->
    <script>
        // Charger le formulaire dans le modal lorsqu'il est ouvert
        document.getElementById('voucherModal').addEventListener('show.bs.modal', function (event) {
            const activityId = {{ activite.id }};
            fetch(`/load-voucher-form/${activityId}`)
                .then(response => response.text())
                .then(data => {
                    document.getElementById('voucherFormContainer').innerHTML = data;
                })
                .catch(error => console.error('Erreur lors du chargement du formulaire', error));
        });

        // G√©rer la soumission du formulaire via AJAX
        document.addEventListener('submit', function (event) {
            if (event.target.id === 'voucherForm') {
                event.preventDefault();
                const formData = new FormData(event.target);
                const activityId = {{ activite.id }};

                fetch(`/apply-voucher/${activityId}`, {
                    method: 'POST',
                    body: formData,
                })
                .then(response => response.json())
                .then(data => {
                    if (data.status === 'success') {
                        alert(data.message); // Afficher un message de succ√®s
                        window.location.reload(); // Recharger la page pour afficher le nouveau prix
                    } else {
                        alert(data.message); // Afficher un message d'erreur
                    }
                })
                .catch(error => console.error('Erreur lors de la soumission du formulaire', error));
            }
        });
		
    </script>

				</div>
			</div>
		</section>
		

<!-- Ajouter Bootstrap JS si n√©cessaire -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

	</body>
</html>
