{% block stylesheets %}
   <!-- Bootstrap CSS -->
   <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
   <style>
       .product-card {
           height: 100%;
           display: flex;
           flex-direction: column;
           border-radius: 12px;
           overflow: hidden;
           transition: transform 0.2s ease-in-out;
       }

       .product-card:hover {
           transform: scale(1.02);
       }

       .product-card img {
           width: 100%;
           height: 200px; /* Taille uniforme */
           object-fit: cover;
       }

       .card-body {
           flex-grow: 1;
           display: flex;
           flex-direction: column;
           justify-content: space-between;
       }

       .product-title {
           min-height: 50px;
           font-size: 1.1rem;
           font-weight: bold;
           color: #2C3E50; /* Bleu foncé sobre */
       }

       .product-price, .product-availability {
           min-height: 30px;
           font-size: 1rem;
           font-weight: bold;
           color: #34495E; /* Bleu-gris élégant */
       }

       .btn-group {
           display: flex;
           gap: 8px;
           margin-top: auto;
       }

       /* Boutons doux et classe */
       .btn-lightblue {
           background-color: #78C2FB; /* Bleu clair doux */
           color: white;
           border-radius: 8px;
       }

       .btn-lightblue:hover {
           background-color: #5AA5E1; /* Un ton plus foncé au hover */
       }

       .btn-blue {
           background-color: #5A9FD4; /* Bleu océan classe */
           color: white;
           border-radius: 8px;
       }

       .btn-blue:hover {
           background-color: #4883B8;
       }

       .btn-darkblue {
           background-color: #4169E1; /* Bleu nuit élégant */
           color: white;
           border-radius: 8px;
       }

       .btn-darkblue:hover {
           background-color: #3655C0;
       }

   </style>
{% endblock %}

{% block body %}
<div class="container mt-4">
    <h1 class="text-center mb-4 text-primary">Boutique</h1>

    <!-- Filtrage et recherche -->
    <form method="GET" action="{{ path('app_boutique') }}" class="mb-4 d-flex gap-2">
        <div class="form-group">
            <label for="category" class="form-label">Filtrer par catégorie :</label>
            <select name="category" id="category" class="form-select">
                <option value="">Toutes</option>
                {% for categorie in categories %}
                    <option value="{{ categorie.id }}" {% if selectedCategory == categorie.id %}selected{% endif %}>
                        {{ categorie.nom }}
                    </option>
                {% endfor %}
            </select>
        </div>

        <div class="form-group flex-grow-1">
            <label for="search" class="form-label">Rechercher un produit :</label>
            <input type="text" name="search" id="search" class="form-control" value="{{ searchQuery }}" placeholder="Nom du produit...">
        </div>

        <div class="d-flex align-items-end">
            <button type="submit" class="btn btn-primary">Filtrer</button>
        </div>
    </form>

    <!-- Affichage des produits -->
    <div class="row">
        {% for produit in products %}
            <div class="col-md-4 mb-4">
                <div class="card product-card shadow-sm">
                    {% if produit.image %}
                        <img src="{{ asset('uploads/produits/' ~ produit.image) }}" class="card-img-top" alt="{{ produit.libelle }}">
                    {% endif %}
                    <div class="card-body">
                        <h5 class="product-title">{{ produit.libelle }}</h5>
                        <p class="product-price"><strong>Prix :</strong> {{ produit.prix }} €</p>
                        <p class="product-availability"><strong>Disponibilité :</strong> 
                            <span class="badge bg-{% if produit.disponibilite %}success{% else %}danger{% endif %}">
                                {{ produit.disponibilite ? 'En stock' : 'Rupture de stock' }}
                            </span>
                        </p>
                        <div class="btn-group">
                            <a href="#" class="btn btn-lightblue">Ajouter au panier</a>
                            <a href="#" class="btn btn-blue">Acheter</a>
                            <a href="#" class="btn btn-darkblue">Détails</a>
                        </div>
                    </div>
                </div>
            </div>
        {% else %}
            <div class="col-12 text-center">
                <p class="alert alert-warning">Aucun produit trouvé.</p>
            </div>
        {% endfor %}
    </div>
</div>
{% endblock %}
